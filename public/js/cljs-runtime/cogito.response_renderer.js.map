{"version":3,"sources":["cogito/response_renderer.cljs"],"mappings":"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","names":["js/cogito","js/cogito.response-renderer","js/cogito.response-renderer.render-component","method-table__5599__auto__","cljs.core.atom","prefer-table__5600__auto__","method-cache__5601__auto__","cached-hierarchy__5602__auto__","hierarchy__5603__auto__","cljs.core.get","fexpr__6708","cljs.core/MultiFn","cljs.core.symbol","cogito.response-renderer/render-component","response","iter__5480__auto__","s__6717","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__6719","cljs.core/chunk-buffer","i__6718","vec__6723","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__6716","cljs.core/chunk-rest","vec__6729","cljs.core/first","cljs.core/cons","cljs.core/rest","idx","item","cljs.core.map_indexed","cljs.core/vector","handler","cljs.core.get_in","s__6733","b__6735","i__6734","iter__6732","header","s__6750","b__6752","i__6751","vec__6754","iter__6749","vec__6791","row-idx","row","s__6758","b__6760","i__6759","vec__6772","iter__6757","vec__6780","s__6796","b__6798","i__6797","vec__6812","iter__6795","vec__6823","col-idx","cell","cljs.core.pr_str","p1__6836#","G__6837","alternatives","turn-id","current-index","re_frame.core.subscribe","set-index!","index","re-frame.core/dispatch","current-alt","or__5002__auto__","cljs.core/deref","alt","total-count","cljs.core._EQ_","cogito.response-renderer/render-response","cljs.core/chunk-first"],"sourcesContent":["(ns cogito.response-renderer\n  (:require [reagent.core :as r]\n            [re-frame.core :as rf]))\n\n;; The response from LLM should be a ClojureScript data structure like:\n;; {:response-type :text\n;;  :content \"Hello world\"}\n;;\n;; or\n;; {:response-type :spreadsheet\n;;  :title \"Team Analysis\"\n;;  :headers [\"Name\" \"Role\" \"Status\"]\n;;  :data [[\"Alice\" \"Lead\" \"Active\"]\n;;         [\"Bob\" \"Dev\" \"Active\"]]\n;;  :interactions {:on-edit update-cell\n;;                 :on-sort sort-by-column}}\n\n(defmulti render-component :response-type)\n\n;; Default text rendering\n(defmethod render-component :text [response]\n  [:div.text-response (:content response)])\n\n;; List rendering\n(defmethod render-component :list [response]\n  [:ul.list-response\n   (for [[idx item] (map-indexed vector (:items response))]\n     ^{:key idx}\n     [:li \n      {:on-click (when-let [handler (get-in response [:interactions :on-click])]\n                   #(handler item))}\n      item])])\n\n;; Spreadsheet/table rendering\n(defmethod render-component :spreadsheet [response]\n  [:div.spreadsheet-response\n   [:h3 (:title response)]\n   [:table\n    [:thead\n     [:tr\n      (for [header (:headers response)]\n        ^{:key header}\n        [:th header])]]\n    [:tbody\n     (for [[row-idx row] (map-indexed vector (:data response))]\n       ^{:key row-idx}\n       [:tr\n        (for [[col-idx cell] (map-indexed vector row)]\n          ^{:key col-idx}\n          [:td cell])])]]])\n\n;; Diagram rendering (simplified for now)\n(defmethod render-component :diagram [response]\n  [:div.diagram-response\n   [:h3 (:title response)]\n   [:div.diagram-placeholder\n    \"Diagram visualization would render here\"\n    [:pre (pr-str (:nodes response))]]])\n\n;; Email draft rendering\n(defmethod render-component :email [response]\n  [:div.email-response\n   [:div.email-header\n    [:div [:strong \"To: \"] (:to response)]\n    [:div [:strong \"Subject: \"] (:subject response)]]\n   [:div.email-body\n    {:contentEditable true\n     :on-blur (when-let [handler (get-in response [:interactions :on-edit])]\n                #(handler (-> % .-target .-innerText)))}\n    (:body response)]])\n\n;; Response set rendering with navigation\n(defmethod render-component :response-set [response]\n  (let [alternatives (:alternatives response)\n        turn-id (:turn-id response) ;; We'll need to pass this from the workbench\n        current-index (rf/subscribe [:current-alternative-index turn-id])\n        set-index! (fn [index] \n                     (rf/dispatch [:set-current-alternative turn-id index]))\n        current-alt (fn [] (nth alternatives (or @current-index 0)))]\n    (fn [response]\n      (let [alt (current-alt)\n            total-count (count alternatives)\n            index (or @current-index 0)]\n        [:div.response-set\n         ;; Current alternative display\n         [:div.alternative-content\n          [render-component alt]]\n         \n         ;; Navigation controls\n         [:div.navigation-controls\n          [:div.nav-buttons\n           ;; First button |<\n           [:button.nav-btn\n            {:disabled (= index 0)\n             :on-click #(set-index! 0)}\n            \"|<\"]\n           \n           ;; Previous button <<\n           [:button.nav-btn\n            {:disabled (= index 0)\n             :on-click #(set-index! (dec index))}\n            \"<<\"]\n           \n           ;; Next button >>\n           [:button.nav-btn\n            {:disabled (= index (dec total-count))\n             :on-click #(set-index! (inc index))}\n            \">>\"]\n           \n           ;; Last button >|\n           [:button.nav-btn\n            {:disabled (= index (dec total-count))\n             :on-click #(set-index! (dec total-count))}\n            \">|\"]]\n          \n          ;; Counter display\n          [:div.nav-counter\n           (str (inc index) \" of \" total-count)]\n          \n          ;; Alternative summary\n          [:div.alternative-summary\n           (:summary alt)]]]))))\n\n;; Default fallback\n(defmethod render-component :default [response]\n  [:div.unknown-response\n   [:pre (pr-str response)]])\n\n(defn render-response [response]\n  ;; Handle both string responses and structured responses\n  (if (string? response)\n    [:div.text-response response]\n    [render-component response]))"]}